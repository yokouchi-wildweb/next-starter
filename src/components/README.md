# components ディレクトリ概要

`src/components/` ではアプリ全体で共有する汎用 UI コンポーネントをカテゴリごとに整理しています。サブディレクトリ単位の README は廃止し、本ファイルでフォルダごとの役割と運用ルールを一元管理します。

## AppFrames

- **主な役割**： 管理者用レイアウト、ユーザー用レイアウトなど画面のブループごとのアウトラインを提供するアプリの基礎コンポーネント
- **ディレクトリ構成**
  - `Admin/` - 管理者向けアプリケーションのレイアウトフレーム
  - `User/` - ユーザー向けアプリケーションのレイアウトフレーム
- **ガイドライン**
  - マクロな構造やそれぞれのアプリでグローバルなセクションを提供する。

## Fanctional

- **主な役割**：ボタンやスイッチなど動作を伴う UI を整理します。テーマ切り替え、CRUD 操作、ページネーション、ポータル系のコントローラなど、ユーザー操作に応じて挙動が変化する要素が対象です。
- **ガイドライン**
  - Provider や高機能ボタンなど、特定の動作をカプセル化した部品を配置します。

## Form

- **主な役割**：フォーム入力に関わるコンポーネントをまとめます。送信ボタンや単項目フィールドをはじめ、React Hook Form の Controller 連携向けと手動制御向けのサブカテゴリに分けて入力部品を整理しています。
- **ディレクトリ構成**
  - `Controlled/`
    - `react-hook-form` の `Controller` / `useController` から受け取る `field` オブジェクトを前提とした入力コンポーネント群。
    - `index.ts` でコンポーネントと型を再エクスポートし、利用側は `@/components/Form/Controlled` からまとめて import します。
  - `Manual/`
    - shadcn/ui などの複合コンポーネントを用いて `field` を手動で橋渡しする入力部品を配置します。
    - `index.ts` で `CheckGroupInput` / `RadioGroupInput` / `SelectInput` を再エクスポートし、`@/components/Form/Manual` から利用します。
  - `Button/`
    - ボタン系コンポーネントを配置します。`Button`、`LinkButton`、`PseudoButton`、`RoundedButton` など、用途に応じたボタンバリエーションと共通スタイル（`button-variants.ts`）を提供します。
  - `DomainFieldRenderer/`
    - ドメイン設定に基づいてフォームフィールドを動的に描画するレンダラー。フィールドタイプの定義やマッピング、メディアフィールドの処理を含みます。
  - `MediaHandler/`
    - 画像や動画などのメディア入力に特化したコンポーネント群。Controlled / Manual の両パターンに対応した `MediaInput` と `MediaUploader` を提供します。
  - 上記以外
    - `AppForm.tsx`、`Field/FieldItem.tsx`、`Label.tsx` など、`field` を直接扱わない補助的なフォーム部品を配置します。
- **Controlled 入力コンポーネントの利用指針**
  - `ControlledInputProps`（または `ControlledTextareaProps`）を受け取り、`Controller` が渡す `value` や `onChange` を内部で扱います。
  - `value` が `undefined` になるケースを考慮し、必要に応じてフォールバックを設けてください。
  - 追加の `onChange` を差し込みたい場合は `field.onChange` 呼び出し後に実行するパターンを踏襲します。
  - ファイル系コンポーネントは UI を内包しますが、アップロード通信は呼び出し元で実行し、結果を props 経由で渡してください。
- **ガイドライン**
  - 入力フィールドやバリデーション関連の UI はここに集約します。
  - `Controller` を前提としたコンポーネントは必ず `Controlled/` 配下へ配置し、`index.ts` にエクスポートを追加します。
  - 手動制御が必要な場合は `Manual/` を利用し、共通パターンを整備します。

## Layout

- **主な役割**：ページやセクションのレイアウトを形作るラッパー。ブロック要素、フレックスレイアウト、画面全体を覆うコンテナなど、配置や余白調整を担う構造要素を提供します。
- **ガイドライン**
  - ページ全体や大きなセクションのアウトラインを定義するコンポーネントを対象にします。

## Navigation

- **主な役割**：ページ間・ページ内のナビゲーションに関するコンポーネントを提供します。タブ型ナビゲーションやページネーションなど、ユーザーの画面遷移を支援する要素が対象です。
- **主要コンポーネント**
  - `PageTabs`：管理画面などで再利用するタブ型ナビゲーション。URL 遷移と連動し、`matcher` でアクティブ判定をカスタマイズ可能。
  - `Pagination`：ページ送りコンポーネント。`makeHref` で遷移先 URL を生成し、件数表示とページ番号リンクを提供。
- **ガイドライン**
  - ナビゲーション・ページ遷移に関連するコンポーネントのみを追加します。

## Overlays

- **主な役割**：ローディング画面やモーダル、ダイアログなど画面上に重ねて表示するコンポーネントを扱います。
- **ガイドライン**
  - オーバーレイ表示に関連する要素のみを追加します。

## Skeleton

- **主な役割**：Shadcn の `Skeleton` をラップした `BaseSkeleton` を中心に、フォームやモーダルなど画面単位で利用するスケルトン（ローディングプレースホルダー）を提供します。
- **主要コンポーネント**
  - `BaseSkeleton`：シマー効果や背景トーンを調整可能な基盤コンポーネント。
  - `FormSkeleton`：フォーム全体のローディング。`fields` や `includeButtons` で調整可能。
  - `DetailModalSkeleton`：詳細モーダルのフォールバック表示。
  - `ImageUploaderSkeleton`：画像アップローダーのプレビュー領域で使用。
- **ガイドライン**
  - 新しい Skeleton を追加する場合は `BaseSkeleton` を基準に構築してください。

## _shadcn

- **主な役割**：shadcn/ui をベースにしたデザインシステムの薄いラッパー。ボタン、入力欄、ダイアログ、セレクト、テーブルなどのプリミティブを共通スタイルで再エクスポートします。
- **ガイドライン**
  - shadcn/ui のスタイルに沿ったカスタマイズを行う際に利用し、再エクスポートの整合性を保ちます。
  - フォルダ名の先頭にアンダースコアを付けることで、他のコンポーネントフォルダと区別しています。

## TextBlocks

- **主な役割**：ページ内で文章構造を表すためのコンポーネント群。`main` や各種セクショニング要素、見出し、段落などを共通化してクラス指定を最小化します。
- **主要コンポーネント**
  - `Main`：ページ全体を包む `main` 要素。バリアントで代表的なレイアウトを切り替えます。
  - `Section`：`section` を基本に `article` や `aside` などへ切り替え可能なラッパー。
  - `PageTitle`：ページ内で基本的に 1 回使用する `h1` 見出し。
  - `SecTitle`：`h2` 以降の見出し用。`as` で `h3` などに変更できます。
  - `Para`：本文用の `p` 要素。トーンやサイズをバリアントで変更できます。
- **ガイドライン**
  - 文章構造やセマンティクスの統一を目的とした部品のみを追加します。

## Three

- **主な役割**：three.js を利用した 3D 表現用コンポーネント。キャンバス描画やシーン構築を担い、立体的な演出をパッケージ化しています。
- **ガイドライン**
  - three.js に依存するコンポーネントのみを配置します。
